<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    
    <link rel="shortcut icon" href="../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>17 Macros - Vimsual Codium</title>
    <link href="../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/highlight.css">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../js/jquery-3.2.1.min.js"></script>
    <script src="../js/bootstrap-3.3.7.min.js"></script>
    <script src="../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "Edici\u00f3n reutilizable con macros", url: "#_top", children: [
              {title: "\u00a1El soporte para macros en vscodevim es limitado!", url: "#el-soporte-para-macros-en-vscodevim-es-limitado" },
              {title: "Crear una nueva macro de vim", url: "#crear-una-nueva-macro-de-vim" },
              {title: "Macros en acci\u00f3n", url: "#macros-en-accion" },
          ]},
        ];

    </script>
    <script src="../js/base.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../18_explorador_de_archivos/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../18_explorador_de_archivos/" class="btn btn-xs btn-link">
        18 Explorador de archivos
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../16_cursores_multiples/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../16_cursores_multiples/" class="btn btn-xs btn-link">
        16 Cursores múltiples
      </a>
    </div>
    
  </div>

    

    <h1 id="edicion-reutilizable-con-macros">Edición reutilizable con macros</h1>
<h3 id="el-soporte-para-macros-en-vscodevim-es-limitado">¡El soporte para macros en vscodevim es limitado!</h3>
<p>El soporte para macros en VSCodeVim no es tan bueno como en Vim, pero decidí incluirlo porque puede ser útil en algunas situaciones como verás pronto. Algunas características más avanzadas de las macros, como editar macros existentes o guardar macros como asignaciones personalizadas, son imposibles o muy inconvenientes en VSCodeVim.</p>
<p>A Vim le encanta ahorrar tiempo y molestias, y te ofrece muchas formas de repetir comandos:</p>
<ul>
<li>El comando <strong><code>.</code></strong> te permite repetir el último cambio.</li>
<li>Los comandos <strong><code>;</code></strong> y <strong><code>,</code></strong> te permiten repetir la última búsqueda de caracteres hacia adelante y hacia atrás, respectivamente.</li>
<li><strong><code>n</code></strong> y <strong><code>N</code></strong> permite repetir la última búsqueda también hacia adelante y hacia atrás.</li>
<li><strong><code>/</code></strong> y <strong><code>?</code></strong> también te permiten repetir la última búsqueda hacia adelante o hacia atrás.</li>
<li><strong><code>:@</code></strong> y <strong><code>@@</code></strong> te permiten repetir comandos Ex.</li>
</ul>
<p><strong>Las macros de Vim llevan este poder de repetición al siguiente nivel al permitirte grabar una colección de comandos a medida que los escribes y luego reproducirlos a voluntad</strong>. Como tal, las macros se convierten en acciones de edición reutilizables que pueden ahorrarte mucho tiempo.</p>
<h2 id="crear-una-nueva-macro-de-vim">Crear una nueva macro de vim</h2>
<p>Crea una nueva macro siguiendo este proceso:</p>
<ol>
<li>Escribe <strong><code>q{register}</code></strong> para comenzar a grabar una macro (por ejemplo <strong><code>qq</code></strong>, comenzará a grabar una macro para registrar <strong><code>q</code></strong>) dentro de un registro.</li>
<li>Realiza las diferentes acciones que deseas incluir en la macro.</li>
<li>Cuando hayas terminado, escribe <strong><code>q</code></strong> para finalizar la grabación.</li>
</ol>
<p>A partir de ese momento, puedes reproducir la macro cuando lo desees:</p>
<ul>
<li>Escribe <strong><code>@{register}</code></strong> (por ejemplo <strong><code>@q</code></strong>) para ejecutar la macro que vive en un determinado <strong><code>register</code></strong>.</li>
</ul>
<p>Una vez que hayas ejecutado una macro una vez, puedes repetir la última macro escribiendo <strong><code>@@</code></strong>. Esto sigue el mismo espíritu de los otros comandos repetidores en Vim.</p>
<h2 id="macros-en-accion">Macros en acción</h2>
<p>Usemos un ejemplo para ilustrar el uso de macros en Vim. Imagina que tienes una lista de algunos artículos comunes que puedes encontrar en cualquier tienda de <a href="https://es.wikipedia.org/wiki/Juego_de_rol">RPG</a> de fantasía de 8 bits vendidos por un <a href="https://es.wikipedia.org/wiki/Personaje_no_jugador">NPC</a> extremadamente aburrido. Los juegos están separados por comas como aquí:</p>
<pre><code class="text">rusty sword,obsidian dagger,silver poniard,broadsword
</code></pre>

<p>Y ahora imagina que quieres esa lista y convertida en HTML. <em>Web 1.0 ahí vamos</em>. El HTML resultante se vería así:</p>
<pre><code class="html">&lt;ul&gt;
  &lt;li&gt;rusty sword&lt;/li&gt;
  &lt;li&gt;obsidian sword&lt;/li&gt;
  &lt;li&gt;silver poniard&lt;/li&gt;
  &lt;li&gt;broadsword poniard&lt;/li&gt;
&lt;/ul&gt;
</code></pre>

<p>Un posible enfoque para resolver este problema es crear una macro que encapsule el proceso de tomar un elemento de una lista y ponerlo dentro de un elemento <code>&lt;li&gt;</code>.</p>
<p>Entonces, comenzando con el cursor en la primera letra de la lista:</p>
<pre><code class="text">v
rusty sword,obsidian dagger,silver poniard,broadsword
</code></pre>

<p>podemos hacer lo siguiente:</p>
<ol>
<li>Comience por grabar la macro en el registro <strong><code>q</code></strong> con <strong><code>qq</code></strong>.</li>
<li>Luego usa <strong><code>f,</code></strong> para encontrar el primer <strong><code>,</code></strong>.</li>
<li>Escribe <strong><code>cwk</code></strong> para eliminar la coma y mover la lista, pero para el primer elemento a la siguiente línea, luego haz una copia de seguridad:</li>
</ol>
<pre><code class="text">   --- cursor is here
  /
 /
|
v
rusty sword
obsidian dagger,silver poniard,broadsword
</code></pre>

<ol>
<li>Ahora <strong><code>I</code></strong>para insertar la etiqueta de apertura.</li>
<li>Luego <strong><code>A</code></strong>para insertar la etiqueta de cierre.</li>
<li>Moverse al comienzo de la línea de abajo <strong><code>j0</code></strong>.</li>
<li>Termine de grabar la macro escribiendo <strong><code>q</code></strong>:</li>
</ol>
<pre><code class="text">&lt;li&gt;rusty sword&lt;/li&gt;
obsidian dagger,silver poniard,broadsword
^
 \
  \
   ----- cursor is here
</code></pre>

<p>Ahora solo escribe <code>@q</code>para reproducir la macro y obtendrás esto:</p>
<pre><code class="text">&lt;li&gt;rusty sword&lt;/li&gt;
&lt;li&gt;obsidian dagger&lt;/li&gt;
silver poniard,broadsword
</code></pre>

<p>Ahora escribe <code>@@</code>para repetir la última macro:</p>
<pre><code class="text">&lt;li&gt;rusty sword&lt;/li&gt;
&lt;li&gt;obsidian dagger&lt;/li&gt;
&lt;li&gt;silver poniard&lt;/li&gt;
broadsword
</code></pre>

<p>Si intentas usar nuestra macro nuevamente, te sorprenderá al descubrir que no sucede nada. ¿Por qué? Como Vim no puede encontrar ninguna coma, la macro deja de ejecutarse. Podemos solucionar esto agregando una coma al final antes de comenzar a procesar la línea de elementos:</p>
<pre><code class="text">rusty sword,obsidian dagger,silver poniard,broadsword,
</code></pre>

<p>Y ahora, si combinamos el poder de los contadores con las macros, podemos procesar toda la línea de elementos a la vez. Tipo <code>4@q</code>:</p>
<pre><code class="html">&lt;li&gt;rusty sword&lt;/li&gt;
&lt;li&gt;obsidian dagger&lt;/li&gt;
&lt;li&gt;silver poniard&lt;/li&gt;
&lt;li&gt;broadsword&lt;/li&gt;
</code></pre>

<p>Has completado tu tarea (<strong>baile de la victoria</strong>).</p>
<p>Espero que este ejemplo sea ilustrativo del poder de las macros y sirva de inspiración en futuras sesiones de codificación. <strong>Lo mejor de las macros es que puedes usar las mismas técnicas (movimientos, operadores, recuentos, etc.) que normalmente usas para escribir código y empaquetarlas para que puedan reutilizarse más tarde</strong> .</p>
<h3 id="edicion-y-guardado-de-macros">Edición y guardado de macros</h3>
<p>Editar y guardar macros como asignaciones personalizadas son características potentes, pero hasta que no se admitan correctamente en VSCodeVim no tiene sentido escribir sobre ellas. Sería confuso. Pero no te preocupes, si estas características llegan a VSCodeVim, actualizaré los apuntes para reflejarlo.</p>

  <br>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../18_explorador_de_archivos/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../18_explorador_de_archivos/" class="btn btn-xs btn-link">
        18 Explorador de archivos
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../16_cursores_multiples/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../16_cursores_multiples/" class="btn btn-xs btn-link">
        16 Cursores múltiples
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="container-fluid wm-page-content">
  <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>